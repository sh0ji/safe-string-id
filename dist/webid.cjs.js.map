{"version":3,"file":"webid.cjs.js.map","sources":["../node_modules/@babel/runtime/helpers/defineProperty.js","../src/constants.js","../src/webid.js"],"sourcesContent":["function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;","export const getCharacters = (delimiter) => {\n\tconst standard = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ-_';\n\tconst replacement = (delimiter === '~') ? '-' : '~';\n\treturn (delimiter) ? standard.replace(delimiter, replacement) : standard;\n};\n\nexport const DefaultOptions = {\n\tdelimiter: '-',\n\tdelimiterInShortid: false,\n\tlower: true,\n\tmaxLength: 128,\n\tremove: null,\n\tstrict: true,\n};\n\nexport const Private = {\n\tdelimiter: new WeakMap(),\n\tprefix: new WeakMap(),\n\tsuffix: new WeakMap(),\n};\n\nexport const Errors = {\n\tTYPE_IS_STRING: str => ({\n\t\tassertion: typeof str === 'string',\n\t\terror: new TypeError(`Expected a string. Received ${typeof str}.`),\n\t}),\n\tSTRICT_DELIMITER: value => ({\n\t\tassertion: /^[\\w-._~]*$/.test(value),\n\t\terror: new Error(`${value} is not a safe delimiter.`),\n\t}),\n\tNON_STRICT_DELIMITER: value => ({\n\t\tassertion: /^\\S*$/g.test(value),\n\t\terror: new Error('The delimiter cannot be a space.'),\n\t}),\n\tVALID_PREFIX: value => ({\n\t\tassertion: /^[a-z]+/i.test(value),\n\t\terror: new Error('prefix must begin with a letter (a-z).'),\n\t}),\n};\n\nexport const Assertions = (() => {\n\tconst obj = {};\n\tObject.keys(Errors).forEach((a) => {\n\t\tobj[a] = (v) => {\n\t\t\tconst err = Errors[a](v);\n\t\t\tif (!err.assertion) {\n\t\t\t\tthrow err.error;\n\t\t\t}\n\t\t};\n\t});\n\treturn obj;\n})();\n","import short from 'shortid';\nimport slugify from 'slugify';\nimport {\n\tgetCharacters,\n\tDefaultOptions,\n\tPrivate,\n\tAssertions,\n} from './constants';\n\nexport default class WebId {\n\tconstructor(opts = {}) {\n\t\tthis.configure(opts);\n\t}\n\n\tget delimiter() {\n\t\treturn Private.delimiter.get(this);\n\t}\n\n\tset delimiter(value) {\n\t\tif (this.options.strict) {\n\t\t\tAssertions.STRICT_DELIMITER(value);\n\t\t} else {\n\t\t\tAssertions.NON_STRICT_DELIMITER(value);\n\t\t}\n\t\tPrivate.delimiter.set(this, value);\n\t}\n\n\tget prefix() {\n\t\treturn Private.prefix.get(this);\n\t}\n\n\tset prefix(value) {\n\t\tif (!value) {\n\t\t\tPrivate.prefix.set(this, '');\n\t\t\treturn;\n\t\t}\n\t\tAssertions.TYPE_IS_STRING(value);\n\t\tif (this.options.strict) Assertions.VALID_PREFIX(value);\n\t\tlet prefix = this.createSlug(value.trim(), null);\n\t\tif (prefix && !prefix.endsWith(this.delimiter)) {\n\t\t\tprefix += this.delimiter;\n\t\t}\n\t\tPrivate.prefix.set(this, prefix);\n\t}\n\n\tget suffix() {\n\t\treturn Private.suffix.get(this);\n\t}\n\n\tset suffix(value) {\n\t\tif (!value) {\n\t\t\tPrivate.suffix.set(this, '');\n\t\t\treturn;\n\t\t}\n\t\tAssertions.TYPE_IS_STRING(value);\n\t\tlet suffix = this.createSlug(value.trim(), null);\n\t\tif (suffix && !suffix.startsWith(this.delimiter)) {\n\t\t\tsuffix = this.delimiter + suffix;\n\t\t}\n\t\tPrivate.suffix.set(this, suffix);\n\t}\n\n\tslugifyOpts(replacement) {\n\t\treturn {\n\t\t\treplacement,\n\t\t\tremove: this.options.remove,\n\t\t\tlower: this.options.lower,\n\t\t};\n\t}\n\n\tcreateSlug(str, delim = this.delimiter) {\n\t\tconst slug = (str) ? slugify(str, this.slugifyOpts(delim)) : '';\n\t\tif (this.options.strict) {\n\t\t\t/** enable strict mode (html 4 / xhtml) */\n\t\t\treturn slug\n\t\t\t\t/** allowed characters: a-z, A-Z, 0-9, _, :, ., - */\n\t\t\t\t.replace(/[^\\w_:.-]/ig, this.delimiter)\n\t\t\t\t/** must start with letter */\n\t\t\t\t.replace(/^[^a-z]+/, '');\n\t\t}\n\t\treturn slug;\n\t}\n\n\tconfigure(opts = {}) {\n\t\tthis.options = { ...DefaultOptions, ...opts };\n\t\tthis.delimiter = this.options.delim || this.options.delimiter;\n\t\tthis.prefix = this.options.pre || this.options.prefix;\n\t\tthis.suffix = this.options.suf || this.options.suffix;\n\t}\n\n\tparse(_str, _options) {\n\t\tconst str = (typeof _str === 'string') ? _str : '';\n\t\tconst options = (typeof _str === 'object') ? _str : _options;\n\t\tif (options) this.configure(options);\n\t\tconst slug = this.createSlug(str);\n\t\tshort.characters(getCharacters((!this.options.delimiterInShortid) ? this.delimiter : null));\n\t\tconst shortid = short.generate();\n\t\tconst maxLength = this.options.maxLength - this.prefix.length - this.suffix.length;\n\t\tconst uniqueSlug = (slug)\n\t\t\t? [slug.substr(0, maxLength - shortid.length), shortid].join(this.delimiter)\n\t\t\t: shortid;\n\t\treturn {\n\t\t\tid: this.prefix + (slug.substr(0, maxLength) || shortid) + this.suffix,\n\t\t\tunique: this.prefix + uniqueSlug + this.suffix,\n\t\t\toriginal: str,\n\t\t\tslug,\n\t\t\tshortid,\n\t\t\tdelimiter: this.delimiter,\n\t\t\tprefix: this.prefix,\n\t\t\tsuffix: this.suffix,\n\t\t};\n\t}\n\n\tgenerate(str, options) {\n\t\treturn this.parse(str, options).id;\n\t}\n\n\tgenerateUnique(str, options) {\n\t\treturn this.parse(str, options).unique;\n\t}\n}\n"],"names":["_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","getCharacters","delimiter","standard","replacement","replace","DefaultOptions","delimiterInShortid","lower","maxLength","remove","strict","Private","WeakMap","prefix","suffix","Errors","TYPE_IS_STRING","str","assertion","error","TypeError","STRICT_DELIMITER","test","Error","NON_STRICT_DELIMITER","VALID_PREFIX","Assertions","keys","forEach","a","v","err","WebId","constructor","opts","configure","get","options","set","createSlug","trim","endsWith","startsWith","slugifyOpts","delim","slug","slugify","pre","suf","parse","_str","_options","short","characters","shortid","generate","length","uniqueSlug","substr","join","id","unique","original","generateUnique"],"mappings":"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"}